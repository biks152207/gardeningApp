<section class="mainheader">
  <div class="container">
    <div class="row">
      <div class="logo inside col-md-12">
        <a ui-sref="home"><img src="assets/images/logo-muller-small.png" alt="" class="img-responsive"></a>
      </div>
    </div>
  </div>
</section>
<section class="nav">
  <div class="container">
    <div class="row">
      <div class="menu col-md-12">
        <ul>
          <li class="col-md-4" style="cursor:pointer"><a onClick="window.history.go(-1); return false;"><i class="fa fa-angle-left"></i> Zurück</a></li>
          <li class="col-md-4 title"><strong>{{edit.header}}</strong></li>
          <li class="col-md-4" style="cursor:pointer"><a ng-click="edit.goDone()">Erledigte</a></li>
        </ul>
      </div>
    </div>
  </div>
</section>
	<section class="form">
		<div class="container">
			<div class="row">
				<form class="form-newproject" name="postForm" id="postForm" novalidate="" ng-submit="edit.submit(postForm.$valid, postForm)">
					<div class="form-group">
						<div class="col-md-4" >
							<label for="">Name</label>
							<input type="text" name="lastName" class="form-control" ng-model="edit.profile.lastname" placeholder="Name" ng-minlength="2"  ng-maxlength="20">
							<span class="text-danger" ng-if="postForm.lastName.$invalid && (postForm.lastName.$dirty || postForm.$submitted)">
                <p ng-if="postForm.lastName.$error.minlength">{{edit.lang.less_character}}</p>
								<p ng-if="postForm.lastName.$error.required">{{edit.lang.enter_name}}</p>
								<p ng-if="postForm.lastName.$error.maxlength">{{edit.lang.more_character}}</p>
							</span>
						</div>
						<div class="col-md-4">
							<label for="">Vorname</label>
							<input type="text" name="firstName" class="form-control" id="" ng-model="edit.profile.firstname" placeholder="Vorname"   ng-maxlength="20">
							<span class="text-danger" ng-if="postForm.firstName.$invalid && (postForm.firstName.$dirty || postForm.$submitted)">
								<p ng-if="postForm.firstName.$error.required">{{edit.lang.enter_first}}</p>
								<p ng-if="postForm.firstName.$error.maxlength">{{edit.lang.more_character}}</p>
							</span>
						</div>
						<div class="col-md-4">
							<label for="">Adresse</label>
							<input type="text" class="form-control" name="address" id="" ng-model="edit.profile.address" placeholder="Adresse">
							<span class="text-danger" ng-if="postForm.address.$invalid && (postForm.address.$dirty|| postForm.$submitted)">
								<p ng-if="postForm.address.$error.required">{{edit.lang.enter_address}}</p>
							</span>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-4">
							<label for="">Postleitzahl</label>
							<input type="text" ng-model="edit.profile.postal_code"  name="postal_code" ng-pattern="/^\d+$/" class="form-control" id="" placeholder="Postleitzahl">
							<span class="text-danger" ng-if="postForm.postal_code.$invalid && (postForm.postal_code.$dirty || postForm.$submitted)">
								<p ng-if="postForm.postal_code.$error.pattern">{{edit.lang.invalid_postal}}</p>
								<p ng-if="postForm.postal_code.$error.required">{{edit.lang.enter_postal}}</p>
							</span>
						</div>
						<div class="col-md-4">
							<label for="">Ort</label>
							<input type="text" name="place" class="form-control" ng-model="edit.profile.place" id="" placeholder="Ort" ng-maxlength="20">
							<span class="text-danger" ng-if="postForm.place.$invalid && (postForm.place.$dirty || postForm.$submitted)">
								<p ng-if="postForm.place.$error.maxlength">{{edit.lang.more_character}}</p>
							</span>
						</div>
						<div class="col-md-4">
							<label for="">Telefon <img src="assets/images/icon-phone.png"></label>
							<input type="text" name="telephone" class="form-control"   id="" ng-model="edit.profile.phone" placeholder="Telefon">
							<span class="text-danger" ng-if="postForm.telephone.$invalid && (postForm.telephone.$dirty || postForm.$submitted)">
								<p ng-if="postForm.telephone.$error.required">{{edit.lang.enter_phone}}</p>
							</span>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-4">
							<label for="">Email</label>
							<input type="text" name="email" ng-pattern="/^[a-zA-Z][-.\w]+\@[-\w]+(?:\.[a-z]+)?\.[a-z]{2,}/"  class="form-control" id="" ng-model="edit.profile.mail" placeholder="Email">
							<span class="text-danger" ng-if="postForm.email.$invalid && (postForm.email.$dirty || postForm.$submitted)">
								<p ng-if="postForm.email.$error.pattern">{{edit.lang.invalid_email}}</p>
								<p ng-if="postForm.email.$error.required">{{edit.lang.enter_email}}</p>
							</span>
						</div>
						<div class="col-md-4">
							<label for="">Ausführungszeitpunkt </label>
							<md-datepicker   ng-model="edit.profile.execution_time" datepicker-timezone md-placeholder="auswählen"></md-datepicker>
						</div>
						<div class="col-md-4">
							<label for="" style="width:100%">Arbeitsaufwand</label>
              <!-- <input type="text" name="name" ng-model="edit.profile.time_to_finish"> -->
							<input type="number" style="display:inline-block; width:50%" name="number" ng-model="edit.profile.time_to_finish" class="form-control" id="" placeholder="Arbeitsaufwand" min="1" max="365">
              <span ng-if="edit.profile.time_to_finish" style="display:inline-block;">
                <p ng-if="edit.profile.time_to_finish == 1">
                  Tag
                </p>
                <p ng-if="edit.profile.time_to_finish > 1">
                  Tage
                </p>
              </span>

              <span class="text-danger" ng-if="postForm.number.$invalid && (postForm.number.$dirty || postForm.$submitted)">
								<p ng-if="postForm.number.$error.max">Bitte eine Zahl zwischen 1 - 365 eingeben</p>
								<p ng-if="postForm.number.$error.min">Bitte eine Zahl zwischen 1 - 365 eingeben</p>
                <p ng-if="postForm.number.$error.number">Nur Zahlen in diesem Feld erlaubt</p>
							</span>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-4">
							<label for="">Zuständigkeit</label>
              <select class="form-control" name="" ng-options="user.name as user.name for user in edit.users" ng-model="edit.profile.worker" >
                <option value="">auswählen</option>
              </select>
            </div>
						<div class="col-md-4">
							<label for="">Wiederholen</label>
							<select  class="form-control" name="repeat"   ng-options="rep.name as rep.name for rep in edit.type" ng-model="edit.profile.repeat" >
                <option value="">auswählen</option>
							</select>

						</div>
						<!-- <div class="col-md-4">
							<label for="">Type</label>
							<select class="form-control" name=""  ng-model="edit.profile.type">
								<option value="gartenunterhalt">Gartenunterhalt</option>
								<option value="gartenumaenderung">Gartenumänderung</option>
							</select>
						</div> -->
					</div>

					<div class="form-group">
						<div class="col-md-6">
							<label for="">Notiz</label>
							<textarea name="" id="" ng-model="edit.profile.notice" cols="30" rows="15" class="form-control" placeholder="Weitere Informationen"></textarea>
						</div>
						<div class="col-md-6">
							<label for="">&nbsp;</label>
							<div  map-lazy-load="https://maps.google.com/maps/api/js">
							  <ng-map center="{{edit.profile.address  + ',' + edit.profile.place + ',' + edit.profile.postal_code}}" zoom="20" >

								</ng-map>
							</div>


						</div>
					</div>

					<div class="form-group">

						<div class="col-md-12">
							<div class="post-upload" ngf-select="edit.upload($files)" multiple="multiple" ng-model="vm.files" style="cursor:pointer">
								<span ngf-multiple="true" ngf-drop="edit.upload($files)">Drag and Drop Files</span>
								<i class="fa fa-upload"></i>
							</div>
							<md-progress-linear  ng-show="edit.uploadStatus"></md-progress-linear>
						</div>
            <!-- <div class="col-md-12" ng-if="vm.files.length > 0" >
              <h3>Preview</h3>
              <div class="row">
                <div class="col-md-2" ng-repeat="data in vm.files">
    							<div class="" style="position:relative;">
    								<img ngf-thumbnail="data"  height="100px" width="100px">

    							</div>
                </div>
  						</div>
              <div style="margin-top:10px;"> -->

              <!-- </div> -->
							<!-- <div class="col-md-2" style="position:relative;display:inline-block" ng-repeat="data in vm.files">
								<img ngf-thumbnail="data" class="img-responsive">
								<div class="close" style="position:absolute;right:0px;top:0px;z-index:10;cursor:pointer" ng-click="$file=null" ng-if="vm.file">
									X
								</div>
							</div> -->
<!--
						</div> -->

					</div>
          <div class="form-group" vertilize-container>
						<div class="col-md-3" ng-repeat="l in edit.profile.thumbs track by $index">
							<div class="" style="position:relative;" vertilize>
								<a download href="{{'http://mueller-gartengestaltung.ch/server/public/api/file/download/' + l.name}}"><img ng-src="{{l.thumb}}"  class="img-responsive" style="min-width:100%"></a>
								<span style="postion:absolute;top:0px;right:0px;z-index:2; position:absolute" ng-click="edit.imageDelete($index, l.name)">
                  X
								</span>
                <a download href="{{'http://mueller-gartengestaltung.ch/server/public/api/file/download/' + l.name}}" style="word-break: break-all">
                  {{l.client_name}}
                </a>
							</div>
						</div>
					</div>
					<div class="col-md-12 text-center" style="margin-bottom:20px">

					</div>

					<div class="col-md-12 btn-holder"><button type="submit"  class="btn btn-green"><i class="fa fa-circle-o-notch fa-spin" ng-if="edit.submitting"></i>speichern</button></div>

				</form>
			</div>
			<!-- <div class="row">
				<div class="col-md-12">
					{{edit.profile.resources}}
				</div>
			</div> -->
		</div>
	</div>
</section>
<style>

	.md-datepicker-calendar-pane.md-pane-open{
		background: #fff !important;
	}
</style>
